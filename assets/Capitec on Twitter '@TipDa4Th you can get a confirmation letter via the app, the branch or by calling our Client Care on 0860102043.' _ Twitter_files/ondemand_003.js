(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{hIbf:function(e,t,a){"use strict";a.r(t),a.d(t,"ProfileSidebarContainer",(function(){return F})),a.d(t,"toRelativePath",(function(){return U}));a("MvUL"),a("kYxP");var i=a("KEM+"),r=a.n(i),s=a("ERkP"),d=a("k49u"),n=a("v6aA"),o=a("es0u"),c=(a("IAdD"),a("hqKg")),l=a("8UdT"),p=a("FLCi"),h=a("P1r1"),m=a("wrlS"),u=a("XOJV"),I=a("YjVx");const b=(e,t)=>Object(I.a)(e,t),f=[],M=Object(c.createSelector)((e,t)=>b(Object(m.c)(e),t).selectEntries(e),u.a.createHydratedSelector,h.k,(e,t,a)=>Object(p.a)(e,e=>{const i=e.type===l.b.Tweet&&t(e.content.id);return!i||i.tombstoneInfo||i.isDeleted||i.possibly_sensitive&&!a||!i.extended_entities||!i.extended_entities.media?f:i.extended_entities.media.map(t=>({mediaItem:t,entry:e}))})),g=(e,t)=>b(e,t).fetchInitial();var w=a("rxPX"),S=a("0KEI"),x=a("MDbM");const E=(e,t)=>M(e,t.userId),_=(e,t)=>t.hideMediaModule?x.a.LOADED:((e,t)=>b(Object(m.c)(e),t).selectInitialFetchStatus(e))(e,t.userId)||x.a.LOADING;var A=Object(w.a)().propsFromState(()=>({mediaItemsWithEntry:E,mediaFetchStatus:_})).adjustStateProps(({mediaItemsWithEntry:e,mediaFetchStatus:t})=>({mediaItems:e.map(e=>Object.assign({},e.mediaItem)),mediaItemsWithEntry:e,mediaFetchStatus:t})).propsFromActions(()=>({createLocalApiErrorHandler:Object(S.d)("PROFILE_SIDE_BAR"),fetchRecentMediaIfNeeded:g})),O=a("kGix"),y=a("3XMw"),L=a.n(y),R=a("fs1G"),v=a("q2Cp"),j=a("Qwev"),D=a("rHpw"),P=a("3dad");const k=L.a.b327c129,C={[d.a.NotAuthorizedToViewUser]:{customAction:R.a}};class F extends s.Component{constructor(...e){super(...e),r()(this,"_fetchRecentUserMedia",()=>{const{createLocalApiErrorHandler:e,fetchRecentMediaIfNeeded:t,hideMediaModule:a,userId:i}=this.props;!a&&t(this.context.featureSwitches,i).catch(e(C))})}componentDidUpdate(e){e.userId===this.props.userId&&e.hideMediaModule===this.props.hideMediaModule||this._fetchRecentUserMedia()}componentDidMount(){this._fetchRecentUserMedia()}render(){const{mediaFetchStatus:e}=this.props;return e&&e!==O.a.LOADING?this._renderSidebar():s.createElement(j.a,{accessibilityLabel:"Loading profile sidebar"})}_renderSidebar(){const e=this._getImages();return s.createElement(o.a,{profileUserId:this.props.userId},e.length>=2&&!this.props.hideMediaModule?s.createElement(v.a,{cacheLocationKey:"profileSidebar",images:e,singleImageMaxAspectRatio:D.a.theme.aspectRatios.landscape,singleImageMinAspectRatio:D.a.theme.aspectRatios.landscape}):null)}_getImages(){const{mediaItems:e,mediaItemsWithEntry:t}=this.props;return t.map((t,a)=>{var i;const{mediaItem:r,entry:s}=t,d={pathname:U(r.expanded_url),state:{mediaItems:{items:e,index:a},forwardPivotInfo:null==(i=s.content)?void 0:i.forwardPivot}},n=P.a.getOriginalImage(r);return n&&{width:n.width,height:n.height,url:n.url,backgroundColor:P.a.getBackgroundColor(r),cropCandidates:P.a.getCropCandidates(r),accessibilityLabel:r.ext_alt_text||k,shouldShowAltLabel:!1,expandedUrl:d}}).filter(Boolean)}}r()(F,"contextType",n.a);const U=e=>e.replace("https://twitter.com",""),N=A(F);t.default=N}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.ProfileSidebar.cf3fe945.js.map